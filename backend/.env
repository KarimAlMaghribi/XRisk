# XRisk - Environment Configuration

DEBUG_ENABLED=true

# Azure key vault
AZURE_KEYVAULT_NAME=vault-13
AZURE_KEYVAULT_URL=https://vault-13.vault.azure.net/

# Log Directory
# /app/logs is used for both local development and Azure Container
# Local Docker: /app/logs is mounted to project root ./logs
# Azure Container: /app/logs is the container internal path
LOG_DIR=/app/logs

# =============================================================================
# HTTPS Configuration (Caddy)
# =============================================================================
# Leave empty to disable HTTPS (HTTP only on port 8000)
# Set your domain and email to enable automatic HTTPS with Let's Encrypt
DOMAIN_NAME=xrisk.info
ADMIN_EMAIL=xrisk.koch@gmail.com

# Frontend URL for browser redirects (e.g., email verification, login redirect)
FRONTEND_URL=https://xrisk.info

# CORS Origins - allowed origins for REST API calls
CORS_ORIGINS=https://xrisk.info,https://www.xrisk.info,https://api.xrisk.info


MCP_BASE_URL=https://xrisk.info/mcp
MCP_STORE_TIMEOUT=30

# PostgreSQL Database
POSTGRES_DB=xrisk
POSTGRES_USER=xrisk
POSTGRES_PORT=5432

# Redis

# =============================================================================
# Email Configuration (for user verification, password reset, and admin notifications)
# =============================================================================
# SMTP settings - used for both user emails and admin notifications
# Leave empty to disable email notifications (will only log to app.log)

MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=True
MAIL_USERNAME=xrisk.koch@gmail.com

# Note: SMTP_* variables for admin notifications fall back to MAIL_* if not set separately
# So you only need to configure MAIL_* above (uses the same Gmail account)

# =============================================================================
# Automatic Retry Configuration
# =============================================================================
# Retry interval in seconds (how often Celery Beat checks for failed workflows)
# Failed workflows are retried immediately when detected (no minimum age)
RETRY_CHECK_INTERVAL=300

# Small Risk Threshold in EUR
# Risks with insurance value <= this amount are considered "small risks"
# Small risks skip the research phase and use a combined analysis/report workflow for faster processing
SMALL_RISK_THRESHOLD_EUR=1000

# OAuth Configuration (Google)
GOOGLE_CLIENT_ID=288436476327-kjiltktqgvcje5dm3lvc1k3pg8dqvn4c.apps.googleusercontent.com

# OAuth Configuration (Microsoft)
MICROSOFT_CLIENT_ID=a21d77e9-3aeb-4289-a335-7f86d65af603
MICROSOFT_TENANT_ID=common
# 'common' for multi-tenant or specific tenant ID for single-tenant

# Maximum number of automatic workflow retries before admin notification
# After this many failed attempts, admin receives email and workflow stops
RETRY_MAX_ATTEMPTS=2

# Global OpenAI Settings (used as defaults)
OPENAI_MODEL=gpt-5
OPENAI_SERVICE_TIER=flex
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=1000

# =============================================================================
# Agent Configurations
# =============================================================================

# --- Validation Agent ---
VALIDATION_MODEL=gpt-5
VALIDATION_TEMPERATURE=0.3
VALIDATION_MAX_TOKENS=100
VALIDATION_USE_FLEX=false

# --- Classification Agent ---
CLASSIFICATION_MODEL=gpt-5
CLASSIFICATION_TEMPERATURE=0.2
CLASSIFICATION_MAX_TOKENS=100
CLASSIFICATION_USE_FLEX=false

# --- Inquiry Agent ---
INQUIRY_MODEL=gpt-5
INQUIRY_TEMPERATURE=0.5
INQUIRY_MAX_TOKENS=500
INQUIRY_USE_FLEX=false

# --- Research Agent (Coordinator) ---
RESEARCH_MODEL=gpt-5
RESEARCH_TEMPERATURE=0.4
RESEARCH_MAX_TOKENS=5000
RESEARCH_USE_FLEX=false

# --- Research Current Agent ---
RESEARCH_CURRENT_MODEL=gpt-5
RESEARCH_CURRENT_TEMPERATURE=0.4
RESEARCH_CURRENT_MAX_TOKENS=1500
RESEARCH_CURRENT_USE_FLEX=false

# --- Research Historical Agent ---
RESEARCH_HISTORICAL_MODEL=gpt-5
RESEARCH_HISTORICAL_TEMPERATURE=0.3
RESEARCH_HISTORICAL_MAX_TOKENS=1500
RESEARCH_HISTORICAL_USE_FLEX=false

# --- Research Regulatory Agent ---
RESEARCH_REGULATORY_MODEL=gpt-5
RESEARCH_REGULATORY_TEMPERATURE=0.3
RESEARCH_REGULATORY_MAX_TOKENS=1500
RESEARCH_REGULATORY_USE_FLEX=false

# --- Analysis Agent ---
ANALYSIS_MODEL=gpt-4o-mini
ANALYSIS_TEMPERATURE=0.6
ANALYSIS_MAX_TOKENS=1000
ANALYSIS_USE_FLEX=false

# --- Report Agent ---
REPORT_MODEL=gpt-4o-mini
REPORT_TEMPERATURE=0.7
REPORT_MAX_TOKENS=3000
REPORT_USE_FLEX=false

# Flask Configuration
# Production environment
FLASK_ENV=production
FLASK_DEBUG=False

#LOG_LEVEL=INFO
# LOG_FILE=app.log
